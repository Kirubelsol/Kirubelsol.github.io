<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="../css/customstyle.css">
	

	<title>ECG Board Development</title>

</head>


<body>

	<!-- Main navigation -->
	<nav class = "navbar navbar-expand-md py-4 navbar-light navs "> 
		<div class = "container-xl ">
			<a class="navbar-brand" href="#">
				<span class="text-white "><i class="bi bi-cpu"></i>
                    ECG Board Development
				</span>
			  </a>

			  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav-list" aria-controls="nav-list" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>

			  <div class="collapse navbar-collapse justify-content-end align-center" id="nav-list">
				<ul class="navbar-nav ">
				  <li class="nav-item">
					<a class="nav-link text-white" href="../index.html" style="font-size: 1.3rem; font-family: 'Comic Sans MS', 'Comic Sans', cursive;">Back to Personal Site</a>
				  </li>

				</ul>
			  </div>
	 
		</div>

	</nav>

	<!-- Intro -->
	
	<section id="intro">
	  <div class="container-lg my-5">
		<div class = " text-center slogan mb-4">
			Developing ECG project
		</div>

		<div class=" row justify-content-center align-items-center serif" >

			<p class=" mb-4 ">Electrocardiography is a diagnostic technique that traces the heart's electrical activity, generated by muscle contractions producing heartbeats. Action potentials from the heart's contractions create electric currents throughout the body, detectable by adhesive skin electrodes due to varying body potentials. This transmission through human tissues and also conductive sensors is called volume conduction. Atria and ventricle actions form P, QRS, and T waves in the signal. P-wave, which is the small jump at the beginning, arises from atrial contractions. The next QRS complex spike signifies ventricular contraction. The T-wave, following QRS, reflects ventricular relaxation.  An electrocardiograph is the medical devise that detects voltage signals ranging from 0.1 mV to 5 mV, including a common node arising from electrode-ground potential. The recommended ECG signal bandwidth spans 0.5 to 150 Hz, sometimes extending to 1 kHz. Biopotential amplifiers initially process ECG signals from chest and limb electrodes, amplifying weak signals for display. These amplifiers require certain features: protection in the input circuit to ensure safe electrode current (often via a diode for one-directional flow and a limiting resistor), substantial input impedance, and operation within relevant frequency ranges. Besides the instrumentation amplifier, a band-pass filter and driven right leg circuit are also used. 
			</p>

			<div class="text-center mb-3 col-md-6">
				<img src="../img/ECG/INA121.PNG" class = "rounded" width = "50%"  alt=" Pinout for IC Instrumentation Amplifier INA121 ">
				<p class="subtitles">Fig 1: Pinout for IC Instrumentation Amplifier INA121 </p>
			</div>

            <p class=" mb-3">
                <span class = "titles"> INA121 amplifier: </span> is the integrated circuit instrumentation amplifier used to amplify small voltage signals with using higher gain. It comes as a single component, containing multiple operational amplifiers and resistors, which simplifies the circuit design and saves space. For instance, considering the gain formula of this amplifier below, using \( R_G \approx 100 \; \Omega \)  you can achieve a gain of 500. 
			</p>

            <p class = "text-center">
				\( G = {1 + {50k \Omega \over {R_G}}} \) 
			</p>

            <p class=" mb-3">
                <span class = "titles"> Band-pass filter: </span> is used to capture frequencies that are essential components of the heartâ€™s electrical activity while ignoring the non-relevant frequencies. Usually, the frequency ranges from 0.05 Hz and 150 Hz.  
			</p>

            <div class="text-center mb-3 col-md-6">
				<img src="../img/ECG/band_pass.PNG" class = "rounded" width = "70%"  alt="  An active band-pass filter ">
				<p class="subtitles">Fig 2: An active band-pass filter </p>
			</div>

            <p class=" mb-3">
                <span class = "titles"> Driven right leg (DRL) circuit: </span> is an electrical component incorporated into biopotential amplifiers to mitigate common mode interference. Common mode signals refer to voltages shared by both inputs of an electrical circuit. In electrocardiography (ECG), these signals often encompass 50 or 60 Hz noise arising from electric and magnetic fields generated by power lines and transformers. These electromagnetic interferences can affect the ECG signal when the subject's body inadvertently acts as an antenna, picking up such interference. The inclusion of a driven right leg circuit is critical for attenuating and eliminating these interferences, consequently enhancing the quality and accuracy of the ECG signal. A common mode rejection ratio can be used to quantify the quality of the DRL. 
			</p>

            <p class=" mb-3">
                The common mode rejection ratio (CMRR) signifies the capacity of a differential amplifier to disregard signals that are in-phase and simultaneously present in both inputs (common-mode signals). An effective instrumentation amplifier is distinguished by a pronounced common rejection mode ratio. Operational amplifiers ideally nullify common mode signals by yielding an output of 0 V. This feature is pivotal for suppressing extraneous noises, external interferences, and undesired signals, thus upholding the amplification of the differential input signal undisturbed. Mathematically, CMRR is the quotient of the differential voltage gain (ADM) and the common mode voltage gain (ACM). 
			</p>

            <p class = "text-center">
				\( CMRR = 20log_{10}({ADM \over {ACM}}) \) 
			</p>

            <p class=" mb-3">
                A higher CMRR value in decibels indicates better rejection of common mode signals, which is desirable in amplifiers that need to amplify only the differential input and reject common mode noise. Ideally,  the common mode voltage gain (ACM) should be close to 0, resulting in a high CMRR. 
            </p>

            <div class="text-center mb-3 col-md-6">
				<img src="../img/ECG/DRL.PNG" class = "rounded" width = "80%"  alt="  DRL circuit">
				<p class="subtitles">Fig 3: DRL circuit </p>
			</div>

            <p class=" mb-3">
                <span class = "titles"> Notch filter: </span>  the twin T notch filter can also be used to filter out the 50 Hz common mode signals from the mains. The cutoff frequency of the notch filter is \( { 1 \over {(2 \pi RC)} } \; Hz\). To achieve this an \( RC \approx 0.0031 \; \Omega F \)  
			</p>

            <div class="text-center mb-3 col-md-6">
				<img src="../img/ECG/notch.PNG" class = "rounded" width = "70%"  alt="  DRL circuit">
				<p class="subtitles">Fig 4: Notch filter </p>
			</div>
            
            <p class=" mb-3">
                <span class = "titles"> Breadboard implementation: </span> the figure below shows the implementation of the ECG on a breadboard using the passive elements, IC instrumentation and operational amplifiers. The DRL circuit is located on bottom left with the band pass filter on top right and connected to the notch filter above it. The three blue, green, and yellow wires with pins on the bottom left are the ones connected to the three electrodes to be connected to the body. The other color codes are fould below followed by the oscilloscope visualization. The results are not perferct, which is potentially due to constant movement during measurement.  
			</p>

            <div class = "row text-center mb-4">
                <div class = "col-md-4">
                    \(   \qquad  \bullet V_{cc}^+ = Red \)
                </div>
                <div class = "col-md-4">
                    \(  \qquad \bullet V_{cc}^- = Black\)
                </div>
                <div class = "col-md-4">
                    \(   \qquad  \bullet GND = Green \)
                </div>
            </div>

            <div class = "row text-center mb-4">
                <div class = "col-md-4">
                    \(   \qquad  \bullet Output = White \)
                </div>
                <div class = "col-md-4">
                    \(  \qquad \bullet Input = Purple \)
                </div>
                <div class = "col-md-4">
                    \(   \qquad  \bullet  In \; between = Yellow  \)
                </div>
            </div>

            <div class = "row justify-content-center ">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/breadboard.PNG" class = "rounded" width = "50%"  alt= "Breadboard implementation">
                    <p class="subtitles">Fig 5: Breadboard implementation </p>
                </div>
        
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/ECG.PNG" class = "rounded" width = "75%"  alt= " Oscilloscope visualization">
                    <p class="subtitles">Fig 6: Oscilloscope visualization  </p>
                </div>
            </div>

            <p class=" mb-3">
                <span class = "titles"> Altium Implementation: </span> altium is an electronic desing automation software used to create and manage electronic circuits and printed circuit boards (PCB). The schematics and PCB for implementing the ECG are shown below. The Instrumentation amplifier together with the DRL is connected to the band-pass filter input, and the band-pass filter output is connected to the notch filter. 
			</p>

            
            <div class="row  justify-content-center">
				<div class="text-center mb-3 col-md-6">
					<img src="../img/ECG/powersupply.PNG" class = "rounded" width = "60%"  alt="Power supply">
                    <p class="subtitles mt-2">Fig 7: Power supply</p>
					
				</div>
				
            </div>

            <div class="row justify-content-center">
				<div class="text-center mb-3 col-md-6">
					<img src="../img/ECG/IA.PNG" class = "rounded" width = "70%"  alt="Instrumentation Amplifier">
                    <p class="subtitles mt-2">Fig 8: Instrumentation Amplifier</p>
					
				</div>
				
            </div>

            <div class="row justify-content-center">
				<div class="text-center mb-3 col-md-6">
					<img src="../img/ECG/bandpassalitum.PNG" class = "rounded" width = "100%"  alt="Band-pass filter">
                    <p class="subtitles mt-2">Fig 9: Band-pass filter</p>
				</div>
            </div>

			<div class="row justify-content-center">	
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/Notchalitum.PNG" class = "rounded" width = "87%"  alt="Notch filter">
                    <p class="subtitles mt-2">Fig 10: Notch filter</p>
                </div>
			</div>

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/DRLaltium.PNG" class = "rounded" width = "80%"  alt="  DRL circuit">
                    <p class="subtitles">Fig 11: DRL </p>
                </div>
            </div>  

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/completeschematic.PNG" class = "rounded" width = "100%"  alt="  Complete circuit schematic">
                    <p class="subtitles">Fig 12: Complete circuit schematic</p>
                </div>
            </div>  

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/PCB.PNG" class = "rounded" width = "100%"  alt="  PCB">
                    <p class="subtitles">Fig 13: PCB</p>
                </div>
            </div>  

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/3DPCB.PNG" class = "rounded" width = "100%"  alt="3D PCB">
                    <p class="subtitles">Fig 14: 3D PCB</p>
                </div>
            </div>  

            <p class=" mb-3">
                <span class = "titles"> Soldered PCB: </span> after designing the circuit it was printed and the components were soldered to the PCB. These components are written on the bill of material table below; some of the materials include two battery retainers, audio jack conenctor, insturmentaion and operational amplifiers. 
                The total cost comes to be around 24 USD for the materials. The values for the passive elements soldered to the are as follows:
			</p>

            <p class=" mb-4 ">
                \( \qquad \qquad \bullet \; Power \; supply: C_1 = C_5 = 100 nF  \qquad  C_3 = C_4 = 1 nF \qquad C_2 = C_6 = 10 \mu F\) <br> <br> 
                \( \qquad \qquad \bullet \; Band\_pass \; filter: R_3 = 33 k \Omega \qquad R_4 = 3.3 M \Omega  \qquad R_5 = 4.7 K \Omega \qquad R_6 = 8.2 k \Omega  \) <br> <br> 
                \( \qquad \qquad \bullet \; Notch \; filter : R_7 = R_8 = R_9 = R_{10} = 650 \Omega  \qquad  C_9 = C_{10} = C_{11} = C_{12} =  4.7 \mu F\) <br> <br> 
                \( \qquad \qquad \bullet \; DRL: R_1 = R_2 = 50 \Omega \qquad R_{11} = R_{13} = 390 k \Omega \qquad R_{12} = 10k \Omega   \)
			</p>



            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-10">
                    <img src="../img/ECG/bill1.PNG" class = "rounded" width = "100%"  alt="Bill of material">
                    <p class="subtitles">Table 1: Bill of material </p>
                </div>
            </div> 

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/finalPCB.PNG" class = "rounded" width = "100%"  alt="Final soldered PCB">
                    <p class="subtitles">Fig 15: Final soldered PCB</p>
                </div>
            </div> 

            <p class=" mb-3">
                <span class = "titles"> Possible improvements: </span> The above circuit can be improved to reduce the area and also cost which are two of the essential parameters. For this purpose, the previous design can be modified to utilize one battery using different configuration rather than two since the single battery configuration can also supply both \( {V_{cc}}^+ \) and \( {V_{cc}}^- \). The amplifiers and passive components used can also be susbtitued with a cheaper but efficient ones. The header pins in between are also removed. Considering these, the new design reduces the area from \( 5896.391 \; {mm}^2 \) to \( 2446.8 \; {mm}^2 \) and the cost is reduced from \( 24 \) to \( 8.732 \; USD.\)  
			</p>

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/newbattery.PNG" class = "rounded" width = "80%"  alt="Improved power supply">
                    <p class="subtitles">Fig 16: Improved power supply</p>
                </div>
            </div> 

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-6">
                    <img src="../img/ECG/new3Dpcb.PNG" class = "rounded" width = "80%"  alt="Improved 3D PCB">
                    <p class="subtitles">Fig 17: Improved 3D PCB </p>
                </div>
            </div> 

            <div class = "row justify-content-center">
                <div class="text-center mb-3 col-md-10">
                    <img src="../img/ECG/newbill.PNG" class = "rounded" width = "100%"  alt="New bill of material">
                    <p class="subtitles">Table 2: New bill of material </p>
                </div>
            </div> 

            
		</div>


		

	  </div>

	</section>

	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/plotly.js@2.24.3/dist/plotly.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.2/lib/browser/math.min.js"></script>

	<script src ="assets/js/prism.js"></script>
	


</body>
</html>