<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
	<link rel="stylesheet" href="../css/customstyle.css">
	<link rel="stylesheet" href="../css/prism.css">
    <script src ="../js/prism.js"></script>

	<title>Gross Path Planning</title>

</head>


<body>

	<!-- Main navigation -->
	<nav class = "navbar navbar-expand-md py-4 navbar-light navs "> 
		<div class = "container-xl ">
			<a class="navbar-brand" href="#">
				<span class="text-white "><i class="bi bi-compass"></i>
          Gross Path Planning
				</span>
			  </a>

			  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav-list" aria-controls="nav-list" aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			  </button>

			  <div class="collapse navbar-collapse justify-content-end align-center" id="nav-list">
				<ul class="navbar-nav ">
				  <li class="nav-item">
					<a class="nav-link text-white" href="../index.html" style="font-size: 1.3rem; font-family: 'Comic Sans MS', 'Comic Sans', cursive;">Back to Personal Site</a>
				  </li>

				</ul>
			  </div>
	 
		</div>

	</nav>

	<!-- Intro -->
	
	<section id="intro">
	  <div class="container-lg my-5">
		<div class = " text-center slogan mb-4">
			Gross Path Planning for an Amphibious Submersible Vehicle
		</div>

		<div class=" row justify-content-center align-items-center serif" >

			<p class=" mb-4 ">

        This Gross Path Planning project was a part of a Castone Group Project which involved the design and implementation of several tasks on a a tethered Remotely Operated Underwater Vehicle (ROV) capable of navigating both underwater and on land using omnidirectional wheels. The tasks involve integrating a sensor suite to the vehicle for autonomous navigation, designing the control system of the ROV, developing the vehicle base to allow motion on a sandy beach. My subteam was dedicated to enhancing the underwater autonomous navigation abilities of the BlueROV2 in three dimensions, where I specifically focused on configuring the sonar, creating ROS packages to read the sonar image, and create the 3D map of the environment for path planning. To achieve this, the ROV integrates sensory data from the Ping360 Scanning Imaging Sonar with 3D maps generated by SLAM (Simultaneous Localization And Mapping). For simulation and path development, we employ the MoveIt and Open Motion Planning Library (OMPL) frameworks alongside a 3D probabilistic map generated with the Octomap library. After reviewing multiple path planning algorithm, the RRT-Connect algorithm, a probabilistic-based method, to chart a collision-free path in the 3D environment is utilized. 
        The system design was thoroughly tested in a swimming pool, where it successfully mapped the environment, generated trajectories, and executed paths to maneuver the ROV.  The repository for the Path Planning Map Generation docker enviornment can be found at the path planning branch of the Castone Repository at &nbsp;
        <a href="https://github.com/CapstoneROV/NYUAD-ROV-Capstone-Repo/tree/path_planning?tab=readme-ov-file" target="_blank">
            <i class="bi bi-github" style="font-size: 1.2em; "></i> 
        </a>          

			</p>

      <div class="text-center mb-3 col-md-6">
				<img src="../img/CapstoneProject/ROV.JPG" class = "rounded" width = "70%"  alt="ROV">
				<p class="subtitles">The Assembled BlueROV2 Vehicle with the sonar located on the left side of the ROV</p>
			</div>

      <p class=" mb-3">
        <span class = "titles"> Constraints: </span> The implementation of this project involve constraints from cost to technical and software ones. For the 3D map generation, the sonar is one of the constraint where its beam width, scanning speed, range and depth rating are some parameters that can affect the Octomap. Some of the technical and software constraints are indicated below.
      </p>

      <div class="text-center mb-1 col-md-7">
				<img src="../img/CapstoneProject/TechnicalConstraints.JPG" class = "rounded" width = "55%"  alt="Technical Constraints">
			</div>

      <div class="text-center mb-3 col-md-7">
				<img src="../img/CapstoneProject/SoftwareConstraint.JPG" class = "rounded" width = "55%"  alt="Software Constraints">
			</div>

      <p class=" mb-3">
        <span class = "titles"> Octomap Generation: </span> A comprehensive design for mapping the environment in both simulation and real-life scenarios was developed. This involves creating a 3D Octomap in simulation, emulating the Ping360 sonar with a restricted scan angle of 120°. The generated Octomap is intended to work alongside OMPL and control commands to produce the trajectory as the robot moves. The design for testing in the pool includes generating the point cloud using a package compatible with ROS Melodic and processing the point cloud to create an Octomap relative to the world frame.
      </p>
      
      <p class=" mb-3">
        <span class = "titles"> Ping360 Sonar Package: </span> To map the environment, the typical ROS package for generating Octomap from the Ping360 sonar, which is designed for ROS 2, was incompatible with the system in use (ROS Melodic). Therefore, an alternative package compatible with ROS Melodic was identified. This package, originally made for ROS Noetic, operates on ROS 1 and requires higher versions of Boost and CMake. Adjustments were necessary to update these libraries without disrupting the existing ROS Melodic environment. Hence, for point cloud generation in the pool, the ROS 1 package was utilized, and necessary missing packages were installed to bridge compatibility gaps between ROS Melodic and ROS Noetic. The data collected from the sonar underwent additional filtering to remove point clouds below a certain threshold, which depends on the maximum sonar detection range. After refining the point cloud, a ROS node was created to shift the point cloud from the Ping360 frame to the world frame, with the BlueROV frame as the intermediary. The Ping360 frame's location was determined using pose information from the ROV, published as a ROS topic via the Mavros package. Upon successfully generating the point cloud with respect to the world frame, the ideal package for Octomap generation was researched. Octomap mapping was found to be suitable, and adjustments were made to align the package with the point cloud settings.
      </p>


      <div id="video" class = "row justify-content-center col-md-8 mb-3">
        <iframe src="https://drive.google.com/file/d/1P_lJXVBq2nShEoR38-1_YJwkv66Ppv4X/preview" width="400" height="500" allow="autoplay"></iframe>
      </div>

      

      <p class=" mb-3">
        <span class = "titles"> Simulation map generation: </span> The criteria for generating the Octomap are considered from both simulation and real-time perspectives. In simulation, the Octomap should be a 3D representation that accurately captures the position of obstacles and is published as a ROS topic for path planning. In real-time, the sonar image from the Ping360 should be received by the topside computer within a second for post-processing. The processed point cloud should then generate an Octomap that accurately represents the walls and obstacles in the pool. This requires precise localization of the robot, utilizing the Doppler Velocity Log (DVL) and sensors in the Navigator flight controller. <br> <br>

        In the simulation, the objective was to create an Octomap that accurately identifies obstacles, as demonstrated in the figure below. The sonar's scanning angle was restricted to 120°, allowing it to view only a segment of each obstacle. The robot was then rotated 360° to capture all cylindrical obstacles. The robot was subsequently moved forward to ensure the Octomap was generated with respect to the world frame rather than the Ping360 frame, which could distort the global map. The figure shows a simulation environment on RViz with with a scanning sonar and surrounding cylindrical obstacles, with the corresponding generated Octomap displayed as the robot moves.

      </p>

      <div class = "row justify-content-center ">
        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/simulationenv.JPG" class = "rounded" width = "85%"  alt= "Simulation Environment on RViz">
            <p class="subtitles">Environment on RViz
               </p>
        </div>

        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/simulation image.JPG" class = "rounded" width = "66%"  alt= "Generated Octomap">
            <p class="subtitles"> Generated Octomap </p>
        </div>
      </div>

      <div id="video" class = "row justify-content-center col-md-8 mb-3">
        <iframe src="https://drive.google.com/file/d/1Q-cpGV41v-tPgFbAf-av_gRGd5YW0Fwo/preview" width="400" height="500" allow="autoplay"></iframe>
      </div>

      <p class=" mb-3">
        <span class = "titles"> Real-time map generation: </span> The real-time tests in the pool, depicted in the figures below yielded similarly positive results. 
        The figure illustrates the integration of Octomap generation with trajectory planning using RRT Connect in real-time. The Octomap captured the pool wall and the obstacle in front of the robot. This data was successfully used to generate the appropriate trajectory, guiding the ROV's movement accordingly. The first image shows the ROV in the pool with the obstacle infront of it. The image to the right shows the original sonar image being captured by Ping360 Sonar without any processing. The third image at the left shows the generated Octomap of the wall, the obstacle, and the generated trajectory. The last figure indicates the waypoints undertaken during the real-time path planning using RRT-Connect. 
      </p>

      <div class = "row justify-content-center ">
        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/realpool.JPG" class = "rounded" width = "70%"  alt= "Real Pool">
            <p class="subtitles">ROV with Obstacle in Path Planning Mode
               </p>
        </div>

        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/SonarImage.png" class = "rounded" width = "70%"  alt= "Sonar Image">
            <p class="subtitles"> Sonar Image</p>
        </div>
      </div>

      <div class = "row justify-content-center ">
        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/simreal.JPG" class = "rounded" width = "70%"  alt= "Generated Map and Trajectory">
            <p class="subtitles">Generated Map and Trajectory
               </p>
        </div>

        <div class="text-center mb-3 col-md-4">
            <img src="../img/CapstoneProject/graph (1).png" class = "rounded" width = "66%"  alt= "3D Way Points of the Real Time Path">
            <p class="subtitles"> 3D Way Points of the Real Time Path </p>
        </div>
      </div>

    </div>

   
	</section>

	
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
	<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
	<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

	<script src="https://cdn.jsdelivr.net/npm/plotly.js@2.24.3/dist/plotly.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/mathjs@11.8.2/lib/browser/math.min.js"></script>

	<script src ="assets/js/prism.js"></script>
	


</body>
</html>